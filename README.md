## **Клонирование сервиса**
~~~
git clone https://github.com/exerayy/avito-tech-go-task
cd avito-tech-go-task
~~~

## **Запуск сервиса**
Убедитесь, что порты `:8080` и `:5432` свободны.

Сервис полностью запускается через `docker-compose up`

## **Swagger**
Swagger доступен по ссылке:
http://localhost:8080/swagger/index.html

## **Запуск интеграционных тестов**
Поднимается Тестовая БД и выполняются тесты
~~~
go install github.com/pressly/goose/v3/cmd/goose@latest
make up-and-test
~~~

# **Дополнительные задания**
## **Эндпоинт статистики**
Эндпоинт получения статистики: `users/getStats`.
Статистика пользователей по PR хранится в таблице [`user_review_stats`](https://github.com/exerayy/avito-tech-go-task/blob/main/migrations/20251115063541_create_table_user_review_stats.sql).
* `user_id` - ID пользователя
* `total_reviews` - количество всех PR где он был/есть ревьюер 
* `active_reviews` - количество OPEN PR'ов
* `merged_reviews` - количество MERGED PR'ов
* `updated_at` - дата и время последнего обновления записи

## **Интеграционное тестирование**
Реализовано интеграционное тестирование. Хранится в папке [`./tests`](https://github.com/exerayy/avito-tech-go-task/tree/main/tests)

## **Метод массовой деактивации пользователей команды**
Был добавлен метод массовой деактивации пользователей команды 
с безопасной переназначаемостью открытых PR. Эндпоинт: `teams/deactivate`.
Работает он так:
1. На вход поступает название команды.
2. Всем участникам команды ставится is_active = FALSE.
3. На открытые PR'ы (в которых эти участники команды были ревьюерами) случайным образом определяются ревьюерами новые активные пользователи из других команд.

## **Конфигурация линтера**
Конфигурация линтера описана в файле [`.golangci.yml`](https://github.com/exerayy/avito-tech-go-task/blob/main/.golangci.yml)

## **Вопросы и решения**
Эндпоинт `users/setIsActive` меняет статус пользователя, но как мы знаем по условию: пользователь с `is_active = FALSE` не может быть ревьюером открытого PR.
Поэтому было принято решение дополнительно сделать в транзакции: изменение статуса и удаление этого пользователя из ревьюеров открытых PR (если ему был поставлен `FALSE` в `is_active`) 